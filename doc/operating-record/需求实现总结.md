# WordPress REST API PythonåŒ…éœ€æ±‚å®žçŽ°æ€»ç»“

## ðŸŽ‰ æ‰€æœ‰éœ€æ±‚å·²å®Œæˆå®žçŽ°

### âœ… 1. å¤šçŽ¯å¢ƒé…ç½®ç³»ç»Ÿ

**å®žçŽ°æƒ…å†µ**ï¼š
- âœ… æ”¯æŒä¸¤ç§çŽ¯å¢ƒé…ç½®æ–‡ä»¶
  - `.env` - æ­£å¼çŽ¯å¢ƒï¼ˆé»˜è®¤ï¼‰
  - `.env.dev` - å¼€å‘çŽ¯å¢ƒ
- âœ… æ™ºèƒ½çŽ¯å¢ƒæ£€æµ‹å’Œé…ç½®åŠ è½½
- âœ… å¼€å‘çŽ¯å¢ƒé»˜è®¤å¼€å¯è°ƒè¯•æ¨¡å¼

**ä½¿ç”¨æ–¹å¼**ï¼š
```python
from wp_python.utils import get_config

# ä½¿ç”¨æ­£å¼çŽ¯å¢ƒé…ç½®ï¼ˆé»˜è®¤ï¼‰
config = get_config()  # æˆ– get_config('.env')

# ä½¿ç”¨å¼€å‘çŽ¯å¢ƒé…ç½®
config = get_config('.env.dev')

# çŽ¯å¢ƒä¿¡æ¯
print(f"å½“å‰çŽ¯å¢ƒ: {config.environment}")  # development/production
print(f"è°ƒè¯•æ¨¡å¼: {config.debug}")        # True/False
print(f"æ—¥å¿—çº§åˆ«: {config.log_level}")    # DEBUG/INFO
```

**é…ç½®å·®å¼‚**ï¼š
| é…ç½®é¡¹ | æ­£å¼çŽ¯å¢ƒ(.env) | å¼€å‘çŽ¯å¢ƒ(.env.dev) |
|--------|---------------|-------------------|
| è°ƒè¯•æ¨¡å¼ | False | True |
| æ—¥å¿—çº§åˆ« | INFO | DEBUG |
| æ—¥å¿—æ–‡ä»¶ | wp-python-production.log | wp-python-dev.log |

### âœ… 2. Richæ ·å¼æ—¥å¿—ç³»ç»Ÿ

**å®žçŽ°æƒ…å†µ**ï¼š
- âœ… å…¨å±€ä½¿ç”¨Richåº“ç¾ŽåŒ–æ—¥å¿—è¾“å‡º
- âœ… æ”¯æŒemojiå’Œé¢œè‰²æ ·å¼
- âœ… æŽ§åˆ¶å°å’Œæ–‡ä»¶åŒé‡æ—¥å¿—è®°å½•
- âœ… å¼‚å¸¸è¿½è¸ªç¾ŽåŒ–æ˜¾ç¤º

**æ—¥å¿—æ ·å¼**ï¼š
```python
logger.debug("ðŸ› è°ƒè¯•ä¿¡æ¯")     # è“è‰²æš—æ·¡
logger.info("â„¹ï¸  æ™®é€šä¿¡æ¯")      # è“è‰²
logger.warning("âš ï¸  è­¦å‘Šä¿¡æ¯")   # é»„è‰²
logger.error("âŒ é”™è¯¯ä¿¡æ¯")      # çº¢è‰²
logger.critical("ðŸš¨ ä¸¥é‡é”™è¯¯")   # ç²—ä½“çº¢è‰²
logger.success("âœ… æˆåŠŸä¿¡æ¯")    # ç»¿è‰²
logger.progress("ðŸ”„ è¿›åº¦ä¿¡æ¯")   # è“è‰²
logger.failure("âŒ å¤±è´¥ä¿¡æ¯")    # çº¢è‰²
```

### âœ… 3. ä¾èµ–åŒ…æ¸…ç†

**ç§»é™¤çš„æœªä½¿ç”¨åŒ…**ï¼š
- âŒ `redis` - æœªä½¿ç”¨çš„Redisä¾èµ–
- âŒ `anyio` - æœªä½¿ç”¨çš„å¼‚æ­¥IOåº“

**å½“å‰ä¾èµ–**ï¼š
```toml
dependencies = [
    "httpx (>=0.28.1,<0.29.0)",      # å¼‚æ­¥HTTPå®¢æˆ·ç«¯
    "pydantic (>=2.11.7,<3.0.0)",   # æ•°æ®éªŒè¯
    "requests (>=2.32.4,<3.0.0)",   # åŒæ­¥HTTPå®¢æˆ·ç«¯
    "python-dotenv (>=1.1.1,<2.0.0)", # çŽ¯å¢ƒå˜é‡åŠ è½½
    "rich (>=14.1.0,<15.0.0)",      # ç¾ŽåŒ–è¾“å‡º
    "fastapi",                       # Webæ¡†æž¶
    "uvicorn[standard]",             # ASGIæœåŠ¡å™¨
    "gunicorn"                       # WSGIæœåŠ¡å™¨
]
```

### âœ… 4. FastAPIæ’ä»¶ç³»ç»Ÿ

**å®žçŽ°æƒ…å†µ**ï¼š
- âœ… å®Œæ•´çš„FastAPI Webæ¡†æž¶é›†æˆ
- âœ… Gunicorn + Uvicornç”Ÿäº§éƒ¨ç½²æ”¯æŒ
- âœ… é«˜åº¦å°è£…çš„ç¬¬ä¸‰æ–¹æž¶æž„
- âœ… è‡ªåŠ¨WordPress APIè·¯ç”±ç”Ÿæˆ

**æ ¸å¿ƒç»„ä»¶**ï¼š

#### 4.1 æ’ä»¶åŸºç±» (`BasePlugin`)
```python
from wp_python.plugin.base import BasePlugin

class CustomPlugin(BasePlugin):
    def __init__(self):
        super().__init__("custom_plugin", "1.0.0")
    
    def initialize(self, config=None):
        # åˆå§‹åŒ–é€»è¾‘
        pass
    
    def start(self):
        # å¯åŠ¨é€»è¾‘
        pass
    
    def stop(self):
        # åœæ­¢é€»è¾‘
        pass
```

#### 4.2 FastAPIæ’ä»¶ (`FastAPIPlugin`)
```python
from wp_python.plugin import FastAPIPlugin, get_plugin_manager

# åˆ›å»ºæ’ä»¶
plugin = FastAPIPlugin()

# é…ç½®æ’ä»¶
config = {
    "host": "0.0.0.0",
    "port": 8000,
    "debug": True,
    "title": "WordPress APIæœåŠ¡",
    "cors_origins": ["*"]
}

plugin.initialize(config)
plugin.start()  # å¯åŠ¨WebæœåŠ¡å™¨
```

#### 4.3 è‡ªåŠ¨è·¯ç”±ç”Ÿæˆ
- âœ… `/api/v1/posts` - æ–‡ç« ç®¡ç†
- âœ… `/api/v1/pages` - é¡µé¢ç®¡ç†
- âœ… `/api/v1/categories` - åˆ†ç±»ç®¡ç†
- âœ… `/api/v1/tags` - æ ‡ç­¾ç®¡ç†
- âœ… `/api/v1/users` - ç”¨æˆ·ç®¡ç†
- âœ… `/api/v1/health` - å¥åº·æ£€æŸ¥
- âœ… `/docs` - è‡ªåŠ¨APIæ–‡æ¡£
- âœ… `/redoc` - ReDocæ–‡æ¡£

#### 4.4 ä¸­é—´ä»¶ç³»ç»Ÿ
- âœ… `WordPressMiddleware` - WordPressé…ç½®æ³¨å…¥
- âœ… `CacheMiddleware` - å†…å­˜ç¼“å­˜
- âœ… `RateLimitMiddleware` - é€ŸçŽ‡é™åˆ¶
- âœ… CORSä¸­é—´ä»¶æ”¯æŒ

#### 4.5 ç”Ÿäº§éƒ¨ç½²æ”¯æŒ
```python
# å¼€å‘æ¨¡å¼
config = {
    "debug": True,
    "reload": True,
    "workers": 1
}

# ç”Ÿäº§æ¨¡å¼
config = {
    "debug": False,
    "reload": False,
    "workers": 4  # è‡ªåŠ¨ä½¿ç”¨Gunicorn
}
```

### âœ… 5. è§„èŒƒåŒ–æ’ä»¶æž¶æž„

**å®žçŽ°æƒ…å†µ**ï¼š
- âœ… æ ‡å‡†åŒ–æ’ä»¶åŸºç±» (`BasePlugin`)
- âœ… æ’ä»¶ç®¡ç†å™¨ (`PluginManager`)
- âœ… è‡ªåŠ¨æ’ä»¶å‘çŽ°æœºåˆ¶
- âœ… æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†

**æ’ä»¶ç³»ç»Ÿç‰¹æ€§**ï¼š

#### 5.1 æ’ä»¶ç®¡ç†å™¨
```python
from wp_python.plugin import get_plugin_manager

manager = get_plugin_manager()

# æ³¨å†Œæ’ä»¶
manager.register(plugin)

# ç®¡ç†æ’ä»¶
manager.enable_plugin("plugin_name")
manager.disable_plugin("plugin_name")
manager.list_plugins()

# æ‰¹é‡æ“ä½œ
manager.initialize_all(config)
manager.start_all()
manager.stop_all()
```

#### 5.2 è‡ªå®šä¹‰æ’ä»¶å¼€å‘
```python
from wp_python.plugin.base import BasePlugin

class MyCustomPlugin(BasePlugin):
    """ç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶ç¤ºä¾‹"""
    
    def __init__(self):
        super().__init__("my_plugin", "1.0.0")
        self.setup_custom_logic()
    
    def initialize(self, config=None):
        """æ’ä»¶åˆå§‹åŒ–"""
        self.logger.info("è‡ªå®šä¹‰æ’ä»¶åˆå§‹åŒ–")
        if config:
            self.configure(config)
    
    def start(self):
        """æ’ä»¶å¯åŠ¨"""
        self.logger.success("è‡ªå®šä¹‰æ’ä»¶å¯åŠ¨æˆåŠŸ")
    
    def stop(self):
        """æ’ä»¶åœæ­¢"""
        self.logger.info("è‡ªå®šä¹‰æ’ä»¶å·²åœæ­¢")
    
    def setup_custom_logic(self):
        """è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘"""
        pass
```

#### 5.3 æ’ä»¶è‡ªåŠ¨å‘çŽ°
```python
# è‡ªåŠ¨å‘çŽ°åŒ…ä¸­çš„æ‰€æœ‰æ’ä»¶
manager.auto_discover("my_plugins_package")
```

### ðŸš€ å®Œæ•´ä½¿ç”¨ç¤ºä¾‹

#### åŸºç¡€FastAPIæœåŠ¡
```python
from wp_python.plugin import FastAPIPlugin, get_plugin_manager
from wp_python.utils import get_config, setup_logging

# è®¾ç½®æ—¥å¿—
logger = setup_logging()

# èŽ·å–é…ç½®
config = get_config('.env.dev')  # å¼€å‘çŽ¯å¢ƒ

# åˆ›å»ºæ’ä»¶
plugin = FastAPIPlugin()

# é…ç½®æ’ä»¶
plugin_config = {
    "host": "0.0.0.0",
    "port": 8000,
    "debug": config.debug,
    "title": "WordPress REST API",
    "wordpress_config": config.to_dict()
}

# å¯åŠ¨æœåŠ¡
plugin.initialize(plugin_config)
plugin.start()
```

#### è‡ªå®šä¹‰æ’ä»¶é›†æˆ
```python
# åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶
class BlogPlugin(BasePlugin):
    def __init__(self):
        super().__init__("blog", "1.0.0")
        self.router = APIRouter()
        self.setup_routes()
    
    def setup_routes(self):
        @self.router.get("/blog/stats")
        async def get_blog_stats():
            return {"posts": 100, "views": 5000}

# é›†æˆåˆ°FastAPI
blog_plugin = BlogPlugin()
fastapi_plugin.add_custom_route(blog_plugin.get_router())
```

### ðŸ“Š é¡¹ç›®æž¶æž„

```
src/wp_python/
â”œâ”€â”€ plugin/                    # æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ base.py               # æ’ä»¶åŸºç±»å’Œç®¡ç†å™¨
â”‚   â”œâ”€â”€ fastapi/              # FastAPIæ’ä»¶
â”‚   â”‚   â”œâ”€â”€ plugin.py         # ä¸»æ’ä»¶ç±»
â”‚   â”‚   â”œâ”€â”€ server.py         # æœåŠ¡å™¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ middleware.py     # ä¸­é—´ä»¶ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ routes.py         # è·¯ç”±ç®¡ç†
â”‚   â””â”€â”€ __init__.py           # æ’ä»¶å¯¼å‡º
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ config.py             # å¤šçŽ¯å¢ƒé…ç½®
â”‚   â””â”€â”€ logger.py             # Richæ—¥å¿—ç³»ç»Ÿ
â””â”€â”€ ...
```

### ðŸ§ª æµ‹è¯•éªŒè¯

**å¤šçŽ¯å¢ƒé…ç½®æµ‹è¯•**ï¼š
```
âœ… å¼€å‘çŽ¯å¢ƒ (.env.dev): DEBUGæ¨¡å¼, è°ƒè¯•å¼€å¯
âœ… æ­£å¼çŽ¯å¢ƒ (.env): INFOæ¨¡å¼, è°ƒè¯•å…³é—­
```

**FastAPIæ’ä»¶æµ‹è¯•**ï¼š
```
âœ… æ’ä»¶ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
âœ… è‡ªåŠ¨è·¯ç”±ç”ŸæˆæˆåŠŸ
âœ… ä¸­é—´ä»¶ç³»ç»Ÿè¿è¡Œæ­£å¸¸
âœ… ç”Ÿäº§éƒ¨ç½²é…ç½®å®Œæˆ
```

### ðŸ“‹ é¡¹ç›®ç‰¹è‰²

1. **ðŸ”§ å¤šçŽ¯å¢ƒæ”¯æŒ**ï¼šå¼€å‘/ç”Ÿäº§çŽ¯å¢ƒè‡ªåŠ¨åˆ‡æ¢
2. **ðŸŽ¨ ç¾Žè§‚æ—¥å¿—**ï¼šRichåº“æä¾›çš„çŽ°ä»£åŒ–è¾“å‡º
3. **ðŸš€ FastAPIé›†æˆ**ï¼šå®Œæ•´çš„WebæœåŠ¡æ¡†æž¶
4. **ðŸ”Œ æ’ä»¶æž¶æž„**ï¼šå¯æ‰©å±•çš„æ’ä»¶ç³»ç»Ÿ
5. **ðŸ“š è‡ªåŠ¨æ–‡æ¡£**ï¼šFastAPIè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£
6. **ðŸ­ ç”Ÿäº§å°±ç»ª**ï¼šGunicorn + Uvicornéƒ¨ç½²æ”¯æŒ

### ðŸŽ¯ ä½¿ç”¨åœºæ™¯

1. **APIæœåŠ¡**ï¼šå¿«é€Ÿæž„å»ºWordPress REST APIæœåŠ¡
2. **å¾®æœåŠ¡**ï¼šä½œä¸ºå¾®æœåŠ¡æž¶æž„çš„ä¸€éƒ¨åˆ†
3. **æ•°æ®åŒæ­¥**ï¼šWordPressæ•°æ®åŒæ­¥å’Œè¿ç§»
4. **å†…å®¹ç®¡ç†**ï¼šè‡ªå®šä¹‰å†…å®¹ç®¡ç†ç³»ç»Ÿ
5. **æ’ä»¶å¼€å‘**ï¼šæ‰©å±•WordPressåŠŸèƒ½

æ‰€æœ‰éœ€æ±‚å·²å®Œæˆå®žçŽ°ï¼Œé¡¹ç›®çŽ°åœ¨å…·æœ‰å®Œæ•´çš„å¤šçŽ¯å¢ƒé…ç½®ã€ç¾Žè§‚çš„æ—¥å¿—ç³»ç»Ÿã€å¼ºå¤§çš„FastAPIæ’ä»¶æž¶æž„å’Œè§„èŒƒåŒ–çš„æ’ä»¶å¼€å‘ä½“ç³»ï¼ðŸŽ‰