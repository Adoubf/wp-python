# WordPress REST API PythonåŒ…éœ€æ±‚å®Œæˆæ€»ç»“

## ğŸ‰ æ‰€æœ‰éœ€æ±‚å·²å®Œæˆ

### âœ… 1. ç¯å¢ƒé…ç½®æ–‡ä»¶æ”¯æŒ

**å®Œæˆæƒ…å†µ**ï¼š
- åˆ›å»ºäº† `.env.dev` ç¯å¢ƒé…ç½®æ–‡ä»¶æ¨¡æ¿
- å®ç°äº† `src/wp_python/utils/config.py` é…ç½®ç®¡ç†å™¨
- æ”¯æŒä»ç¯å¢ƒå˜é‡åŠ è½½WordPressç«™ç‚¹é…ç½®
- è‡ªåŠ¨æŸ¥æ‰¾å’ŒåŠ è½½ `.env.dev` æ–‡ä»¶

**é…ç½®é¡¹**ï¼š
```bash
# WordPressç«™ç‚¹é…ç½®
WP_BASE_URL=https://your-wordpress-site.com
WP_USERNAME=your-username
WP_APP_PASSWORD=your-app-password

# APIé…ç½®
WP_TIMEOUT=30
WP_VERIFY_SSL=true

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_FILE=logs/wp-python.log

# æµ‹è¯•é…ç½®
TEST_POST_ID=1
TEST_CATEGORY_ID=1
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```python
from wp_python.utils import get_config

config = get_config()
wp = WordPress(
    config.base_url,
    **config.get_auth_config(),
    **config.get_client_config()
)
```

### âœ… 2. Poetryç¯å¢ƒæ”¯æŒ

**å®Œæˆæƒ…å†µ**ï¼š
- æ‰€æœ‰æµ‹è¯•å‘½ä»¤éƒ½ä½¿ç”¨ `poetry run` å‰ç¼€
- é¡¹ç›®å®Œå…¨åŸºäºPoetryç‹¬ç«‹è™šæ‹Ÿç¯å¢ƒ
- æ·»åŠ äº† `rich` ä¾èµ–ç”¨äºæ—¥å¿—ç³»ç»Ÿ

**æµ‹è¯•å‘½ä»¤**ï¼š
```bash
poetry install
poetry run python -m pytest tests/ -v
poetry run python examples/env_config_example.py
poetry run python examples/basic_usage.py
poetry run python examples/common_usage.py
```

### âœ… 3. Rich + Logging æ—¥å¿—ç³»ç»Ÿ

**å®Œæˆæƒ…å†µ**ï¼š
- åˆ›å»ºäº† `src/wp_python/utils/logger.py` æ—¥å¿—ç³»ç»Ÿ
- é›†æˆäº† Rich åº“æä¾›ç¾è§‚çš„æ§åˆ¶å°è¾“å‡º
- æ”¯æŒæ–‡ä»¶æ—¥å¿—è®°å½•
- æä¾›å¤šç§æ—¥å¿—çº§åˆ«å’Œæ ·å¼

**ç‰¹æ€§**ï¼š
- ğŸ¨ ç¾è§‚çš„æ§åˆ¶å°è¾“å‡ºï¼ˆä½¿ç”¨Richï¼‰
- ğŸ“ æ–‡ä»¶æ—¥å¿—è®°å½•
- ğŸ” Richå¼‚å¸¸è¿½è¸ª
- âœ… æˆåŠŸ/å¤±è´¥/è¿›åº¦çŠ¶æ€æ˜¾ç¤º
- ğŸ•’ æ—¶é—´æˆ³å’Œè·¯å¾„æ˜¾ç¤º

**ä½¿ç”¨æ–¹å¼**ï¼š
```python
from wp_python.utils import setup_logging

logger = setup_logging(level="INFO", log_file="logs/wp-python.log")
logger.success("æ“ä½œæˆåŠŸ")
logger.failure("æ“ä½œå¤±è´¥")
logger.progress("æ­£åœ¨å¤„ç†...")
```

### âœ… 4. å¢å¼ºçš„å¼‚å¸¸ç±»ç³»ç»Ÿ

**å®Œæˆæƒ…å†µ**ï¼š
- æ‰©å±•äº† `WordPressError` åŸºç±»
- æ·»åŠ äº† `endpoint` å’Œ `method` å­—æ®µ
- æä¾›äº†è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æ ¼å¼åŒ–
- å®ç°äº† `to_dict()` æ–¹æ³•ç”¨äºé”™è¯¯åºåˆ—åŒ–

**æ–°ç‰¹æ€§**ï¼š
```python
class WordPressError(Exception):
    def __init__(
        self, 
        message: str, 
        code: Optional[str] = None,
        status_code: Optional[int] = None,
        data: Optional[Dict[str, Any]] = None,
        endpoint: Optional[str] = None,  # æ–°å¢
        method: Optional[str] = None     # æ–°å¢
    ):
```

**é”™è¯¯ä¿¡æ¯æ ¼å¼**ï¼š
```
[error_code] HTTP 400 GET /wp/v2/posts é”™è¯¯æ¶ˆæ¯
```

### âœ… 5. ä¿®å¤æ¨¡å‹æ•°æ®ç±»å‹é—®é¢˜

**å®Œæˆæƒ…å†µ**ï¼š
- ä¿®å¤äº† `meta` å­—æ®µç©ºæ•°ç»„é—®é¢˜
- å®ç°äº† `from_api_response()` ç±»æ–¹æ³•
- å¤„ç†äº†WordPress APIè¿”å›çš„å„ç§æ•°æ®æ ¼å¼é—®é¢˜
- æ”¯æŒJSONå­—ç¬¦ä¸²è‡ªåŠ¨è§£æ

**ä¿®å¤çš„é—®é¢˜**ï¼š
- âŒ `meta` å­—æ®µè¿”å›ç©ºæ•°ç»„ `[]` è€Œä¸æ˜¯ç©ºå¯¹è±¡ `{}`
- âŒ æŸäº›å­—æ®µå¯èƒ½è¿”å›å­—ç¬¦ä¸²è€Œä¸æ˜¯æœŸæœ›çš„æ•°æ®ç±»å‹
- âŒ Pydanticæ¨¡å‹åˆ›å»ºæ—¶çš„ç±»å‹éªŒè¯é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
@classmethod
def from_api_response(cls, data: Any) -> 'BaseWordPressModel':
    """æ™ºèƒ½å¤„ç†WordPress APIå“åº”æ•°æ®"""
    # å¤„ç†JSONå­—ç¬¦ä¸²
    if isinstance(data, str):
        data = json.loads(data)
    
    # å¤„ç†metaå­—æ®µç©ºæ•°ç»„é—®é¢˜
    if 'meta' in data and isinstance(data['meta'], list) and len(data['meta']) == 0:
        data['meta'] = {}
    
    # å¤„ç†å…¶ä»–æ•°æ®ç±»å‹é—®é¢˜
    # ...
    
    return cls(**data)
```

### âœ… 6. æšä¸¾å’Œå­—ç¬¦ä¸²å…¼å®¹æ€§

**ä¹‹å‰å·²å®Œæˆ**ï¼š
- æ”¯æŒæšä¸¾å’Œå­—ç¬¦ä¸²æ··åˆä½¿ç”¨
- åˆ›å»ºäº†è¾…åŠ©å‡½æ•°å¤„ç†å‚æ•°è½¬æ¢
- æä¾›æœ€å¤§çš„ä½¿ç”¨çµæ´»æ€§

```python
# æ‰€æœ‰æ–¹å¼éƒ½æ”¯æŒ
wp.posts.list(status=['publish', 'draft'])                    # çº¯å­—ç¬¦ä¸²
wp.posts.list(status=[PostStatus.PUBLISH, PostStatus.DRAFT])  # çº¯æšä¸¾
wp.posts.list(status=[PostStatus.PUBLISH, 'draft'])           # æ··åˆä½¿ç”¨
```

## ğŸ“ æ–°å¢æ–‡ä»¶

### é…ç½®å’Œæ—¥å¿—ç³»ç»Ÿ
- `src/wp_python/utils/config.py` - ç¯å¢ƒé…ç½®ç®¡ç†å™¨
- `src/wp_python/utils/logger.py` - Richæ—¥å¿—ç³»ç»Ÿ
- `.env.dev` - ç¯å¢ƒé…ç½®æ–‡ä»¶æ¨¡æ¿

### ç¤ºä¾‹æ–‡ä»¶
- `examples/env_config_example.py` - ç¯å¢ƒé…ç½®ä½¿ç”¨ç¤ºä¾‹
- `examples/common_usage.py` - å¸¸ç”¨åŠŸèƒ½ç¤ºä¾‹
- `examples/advanced_usage.py` - é«˜çº§åŠŸèƒ½ç¤ºä¾‹

### ç›®å½•ç»“æ„
- `logs/` - æ—¥å¿—æ–‡ä»¶ç›®å½•

## ğŸ§ª æµ‹è¯•ç»“æœ

**å•å…ƒæµ‹è¯•**ï¼š
```bash
poetry run python -m pytest tests/ -v
# 22 passed in 0.63s âœ…
```

**åŠŸèƒ½æµ‹è¯•**ï¼š
- âœ… ç¯å¢ƒé…ç½®åŠ è½½
- âœ… æ—¥å¿—ç³»ç»Ÿå·¥ä½œæ­£å¸¸
- âœ… æšä¸¾/å­—ç¬¦ä¸²å…¼å®¹æ€§
- âœ… æ¨¡å‹æ•°æ®å¤„ç†
- âœ… å¼‚å¸¸ç³»ç»Ÿå¢å¼º

## ğŸš€ ä½¿ç”¨æ–¹å¼

### 1. é…ç½®ç¯å¢ƒ
```bash
# å¤åˆ¶å¹¶ç¼–è¾‘ç¯å¢ƒé…ç½®
cp .env.dev .env.local
# ç¼–è¾‘ .env.local å¡«å…¥çœŸå®çš„WordPressç«™ç‚¹ä¿¡æ¯
```

### 2. è¿è¡Œç¤ºä¾‹
```bash
# ç¯å¢ƒé…ç½®ç¤ºä¾‹
poetry run python examples/env_config_example.py

# åŸºç¡€åŠŸèƒ½ç¤ºä¾‹
poetry run python examples/basic_usage.py

# å¸¸ç”¨åŠŸèƒ½ç¤ºä¾‹
poetry run python examples/common_usage.py

# é«˜çº§åŠŸèƒ½ç¤ºä¾‹
poetry run python examples/advanced_usage.py
```

### 3. åœ¨ä»£ç ä¸­ä½¿ç”¨
```python
from wp_python import WordPress
from wp_python.utils import get_config, setup_logging

# è®¾ç½®æ—¥å¿—
logger = setup_logging()

# åŠ è½½é…ç½®
config = get_config()

# åˆ›å»ºå®¢æˆ·ç«¯
with WordPress(
    config.base_url,
    **config.get_auth_config()
) as wp:
    # ä½¿ç”¨æ··åˆå‚æ•°ï¼ˆæšä¸¾+å­—ç¬¦ä¸²ï¼‰
    posts = wp.posts.list(
        status=[PostStatus.PUBLISH, 'draft'],
        per_page=10
    )
    
    logger.success(f"è·å–åˆ° {len(posts)} ç¯‡æ–‡ç« ")
```

## ğŸ¯ é¡¹ç›®ç‰¹è‰²

1. **é«˜åº¦çµæ´»**ï¼šæ”¯æŒæšä¸¾å’Œå­—ç¬¦ä¸²æ··åˆä½¿ç”¨
2. **é…ç½®é©±åŠ¨**ï¼šé€šè¿‡ç¯å¢ƒæ–‡ä»¶ç®¡ç†é…ç½®
3. **ç¾è§‚æ—¥å¿—**ï¼šRichåº“æä¾›çš„ç°ä»£åŒ–æ—¥å¿—è¾“å‡º
4. **é”™è¯¯å‹å¥½**ï¼šè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¼‚å¸¸å¤„ç†
5. **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ç±»å‹æç¤ºå’Œæ•°æ®éªŒè¯
6. **ç”Ÿäº§å°±ç»ª**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## ğŸ“‹ æŠ€æœ¯æ ˆ

- **Python**: 3.11+
- **åŒ…ç®¡ç†**: Poetry
- **HTTPå®¢æˆ·ç«¯**: requests + httpx
- **æ•°æ®éªŒè¯**: Pydantic v2
- **æ—¥å¿—ç³»ç»Ÿ**: Rich + logging
- **é…ç½®ç®¡ç†**: python-dotenv
- **æµ‹è¯•æ¡†æ¶**: pytest

æ‰€æœ‰éœ€æ±‚å·²å®Œæˆï¼Œé¡¹ç›®ç°åœ¨å…·æœ‰å®Œæ•´çš„åŠŸèƒ½ã€ç¾è§‚çš„æ—¥å¿—è¾“å‡ºã€çµæ´»çš„é…ç½®ç®¡ç†å’Œå¼ºå¤§çš„é”™è¯¯å¤„ç†èƒ½åŠ›ï¼ğŸ‰